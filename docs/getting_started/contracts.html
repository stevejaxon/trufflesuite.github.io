

<!doctype html>
<html lang="en">
    

  <head>
    <meta charset="utf-8">
  
  
    <!-- Fallback for Font family below in noscript [*] -->
    <script type="text/javascript">
      WebFontConfig = {
        google: { families: [ 'Oswald:300,400,700',  'Open+Sans:400,700',  'Grand+Hotel' ] }
      };
      (function() {
        var wf = document.createElement('script');
        wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
        wf.type = 'text/javascript';
        wf.async = 'true';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(wf, s);
      })(); </script>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Your Ethereum Swiss Army Knife">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="news_keywords" content="solidity, dapps, contracts, smart contracts" />
    <meta name="standout" content="http://truffleframework.com" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta property="og:site_name" content="Truffle Suite" />
    <meta property="og:description" content="Your Ethereum Swiss Army Knife" />
    <meta property="og:title" content="Interacting with your contracts | Truffle Suite" />
    <meta property="og:url" content="http://truffleframework.com" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://github.com/trufflesuite/trufflesuite.github.io/raw/master/images/truffle-share.png" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="Truffle Suite" />
    <meta name="twitter:title" content="Interacting with your contracts | Truffle Suite" />
    <meta name="twitter:description" content="Your Ethereum Swiss Army Knife" />
    <meta name="twitter:creator" content="Truffle Suite" />
    <meta name="twitter:domain" content="truffleframework.com" />
    <meta name="twitter:image:src" content="https://github.com/trufflesuite/trufflesuite.github.io/raw/master/images/truffle-share.png" />

    
    

    <title>
    Interacting with your contracts | 
    Truffle Suite
    
    </title>



    <link rel="author" href="humans.txt" />

    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Truffle Suite">
    <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Web Starter Kit">
    <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="stylesheet" href="/styles/main.css">
    
      <noscript>
        <!-- [*] Web fonts for no-js -->
        <link href='http://fonts.googleapis.com/css?family=Oswald:300,400,700%7COpen+Sans:400,700%7CGrand+Hotel' rel='stylesheet' type='text/css'>
      </noscript>
    
  </head>

  <body class="
    body-docs
    
    
  ">
    <main>
      <section class="Documentation">
  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand hidden-xs" href="/">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 265.39 282.11"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#5e464d; mask:none;}.cls-3{mask:url(#mask);}.cls-4{mask:url(#mask-2);}.cls-5{fill:#3fe0c5;}</style><mask id="mask" x="0" y="23.1" width="265.39" height="259.02" maskUnits="userSpaceOnUse"><g id="mask-4"><polygon id="path-3" class="cls-1" points="0 23.1 265.39 23.1 265.39 282.11 0 282.11 0 23.1"/></g></mask><mask id="mask-2" x="-6.02" y="0" width="267.03" height="260.62" maskUnits="userSpaceOnUse"><g id="mask-2-2" data-name="mask-2"><polyline id="path-1" class="cls-1" points="-6.02 0 261.01 0 261.01 260.62 -6.02 260.62"/></g></mask></defs><title>truffle-logo</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><polygon id="Fill-12" class="cls-2" points="0 243.25 20.95 243.25 20.95 250.36 14.05 250.36 14.05 281.16 6.73 281.16 6.73 250.36 0 250.36 0 243.25"/><path id="Fill-14" class="cls-2" d="M46.31,258.06H50.6q3.44,0,4.74-.9a3.4,3.4,0,0,0,1.3-3A3.67,3.67,0,0,0,56,252a3.57,3.57,0,0,0-1.72-1.32,13.07,13.07,0,0,0-4-.4h-4Zm-7.22-14.82h9.68q6.28,0,8.95,1.12A9.18,9.18,0,0,1,62,248.09a11.4,11.4,0,0,1,1.62,6.16,10.49,10.49,0,0,1-1.79,6.25,10.84,10.84,0,0,1-5.4,3.8l9,16.86H57.53L49,265.1H46.31v16.06H39.09Z"/><g class="cls-3"><path id="Fill-16" class="cls-2" d="M83.77,243.24H91v24.52a12.7,12.7,0,0,0,.55,4.48,4.42,4.42,0,0,0,1.83,2.1,5.74,5.74,0,0,0,3.08.79,6,6,0,0,0,3.28-.88,4.59,4.59,0,0,0,1.91-2.22,16.54,16.54,0,0,0,.53-5.17V243.24h7.25v22.6a32.63,32.63,0,0,1-.65,7.94,11.23,11.23,0,0,1-2.46,4.28,11.39,11.39,0,0,1-4.19,3.05,14.21,14.21,0,0,1-5.52,1,13.37,13.37,0,0,1-7.18-1.9,11,11,0,0,1-4.37-4.74q-1.31-2.85-1.31-9.63Z"/></g><polygon id="Fill-19" class="cls-2" points="131.28 243.25 150.1 243.25 150.1 250.28 138.45 250.28 138.45 257.16 150.1 257.16 150.1 264.1 138.45 264.1 138.45 281.16 131.28 281.16 131.28 243.25"/><polygon id="Fill-21" class="cls-2" points="170.07 243.25 188.89 243.25 188.89 250.28 177.24 250.28 177.24 257.16 188.89 257.16 188.89 264.1 177.24 264.1 177.24 281.16 170.07 281.16 170.07 243.25"/><polygon id="Fill-23" class="cls-2" points="208.8 243.25 216.02 243.25 216.02 274.28 226.53 274.28 226.53 281.16 208.8 281.16 208.8 243.25"/><polygon id="Fill-25" class="cls-2" points="244.7 243.25 265.39 243.25 265.39 250.31 251.86 250.31 251.86 257.16 265.39 257.16 265.39 264.1 251.86 264.1 251.86 274.07 265.39 274.07 265.39 281.16 244.7 281.16 244.7 243.25"/><g id="Group-5"><g class="cls-4"><path id="Fill-3" class="cls-2" d="M234.59,102.14a102.15,102.15,0,0,1-185,59.71c-12.12-16.79-16.9-37.42-16.9-59.71,0-31,11.42-58.74,33.2-77.47a102.15,102.15,0,0,1,168.72,77.47"/></g></g><path id="Fill-6" class="cls-1" d="M104.07,192c4.17,1.3,18.16,5.45,18.63,1,.25-2.42-7.09-4.72-17.17-9.71a159,159,0,0,1-39-27.24A87.83,87.83,0,0,1,38.63,95.74C37,64.88,48.47,39.58,67.91,22.95A102.2,102.2,0,0,0,49.56,161.86a142.9,142.9,0,0,0,12.67,10.24c11.46,8.21,28.11,15.65,41.84,19.92"/><path id="Fill-8" class="cls-1" d="M236,78.73c-6.27-29.44-25.73-50.05-51.75-64.61,19.9,14.17,47.92,44.3,31.4,70.86-14,21.3-48,17.12-66.65,7-22.12-12-49.83-39-22.5-65.4,17.69-17.08,74,2.07,64.09,27.61-5.78,14.84-28.28,11.55-38.4,4.28-7.46-5.36-13.74-14.57-10.42-24.08,1.07-3,.91-7.78-3.39-4.3C135.15,32.72,133.54,37,133,41c-4.71,33.29,54.6,59.1,72.19,26.89,9.13-16.72-5.66-41-24.29-50.94-14-7.5-28.58-12.77-46.44-11.49-28.55,2-52.52,19.9-55.52,49.08-3,29,16.38,55.09,39.22,70.71,24,16.4,56.26,27.21,85.78,17.43,26.46-8.77,37.39-39.14,32.07-63.93"/><path id="Fill-10" class="cls-5" d="M198.74,56.18C201.58,37.1,184.33,24,168.41,18c-18.79-7-43.59-3.94-57.27,11.62-10,11.42-9.35,28-4.2,41.41,7.8,20.27,25.41,34.93,45.91,41.25,14.57,4.5,32.18,6.46,46.95,1.71,21.53-6.92,28.54-29.38,24.09-49.95a59.25,59.25,0,0,0-4.36-12.88c-2.72-5.71-11-17.26.43-3.19a50.44,50.44,0,0,1,3.31,4.91,54.87,54.87,0,0,1,5.59,12.41c6.26,19.2,1.35,41.6-16,53.19-13.31,8.88-30.23,9.93-45.68,7.71-20.7-3-40.21-13-53.76-29.09C101,82.48,92.55,61.41,97.65,42.16c3.72-14.09,15.17-24.61,28.86-29,17.33-5.61,36.41-3,52,6.11,7.81,4.56,15,10.86,18.94,19.11a28.27,28.27,0,0,1,2.85,11.93,24.44,24.44,0,0,1-.39,5c-.11.6-1.37,2.29-1.2.9"/></g></g></svg>

      </a>
      <a class="navbar-brand visible-xs" href="/">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 206.99 204.29"><defs><style>.cls-1{fill:#fff;}.cls-2{mask:url(#mask);}.cls-3{fill:#5e464d;}.cls-mint{fill:#3fe0c5;}</style><mask id="mask" x="-36.33" y="0" width="267.03" height="260.62" maskUnits="userSpaceOnUse"><g id="mask-2"><polyline id="path-1" class="cls-1" points="-36.33 0 230.71 0 230.71 260.62 -36.33 260.62"/></g></mask></defs><title>truffle-logomark</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><g id="Group-5"><g class="cls-2"><path id="Fill-3" class="cls-3" d="M204.29,102.14a102.15,102.15,0,0,1-185,59.71c-12.12-16.79-16.9-37.42-16.9-59.71,0-31,11.42-58.74,33.2-77.47a102.15,102.15,0,0,1,168.72,77.47"/></g></g><path id="Fill-6" class="cls-1" d="M73.77,192c4.17,1.3,18.16,5.45,18.63,1,.25-2.42-7.09-4.72-17.17-9.71a159,159,0,0,1-39-27.24A87.83,87.83,0,0,1,8.33,95.74C6.67,64.88,18.17,39.58,37.61,22.95A102.2,102.2,0,0,0,19.26,161.86a142.9,142.9,0,0,0,12.67,10.24C43.39,180.31,60,187.74,73.77,192"/><path id="Fill-8" class="cls-1" d="M205.68,78.73C199.42,49.29,180,28.68,153.93,14.12c19.9,14.17,47.92,44.3,31.4,70.86-14,21.3-48,17.12-66.65,7-22.12-12-49.83-39-22.5-65.4,17.69-17.08,74,2.07,64.09,27.61-5.78,14.84-28.28,11.55-38.4,4.28-7.46-5.36-13.74-14.57-10.42-24.08,1.07-3,.91-7.78-3.39-4.3-3.21,2.6-4.83,6.88-5.39,10.86-4.71,33.29,54.6,59.1,72.19,26.89,9.13-16.72-5.66-41-24.29-50.94-14-7.5-28.58-12.77-46.44-11.49-28.55,2-52.52,19.9-55.52,49.08-3,29,16.38,55.09,39.22,70.71,24,16.4,56.26,27.21,85.78,17.43,26.46-8.77,37.39-39.14,32.07-63.93"/><path id="Fill-10" class="cls-mint" d="M168.44,56.18C171.28,37.1,154,24,138.1,18c-18.79-7-43.59-3.94-57.27,11.62-10,11.42-9.35,28-4.2,41.41C84.44,91.35,102,106,122.55,112.33c14.57,4.5,32.18,6.46,46.95,1.71C191,107.11,198,84.66,193.58,64.09a59.25,59.25,0,0,0-4.36-12.88c-2.72-5.71-11-17.26.43-3.19A50.44,50.44,0,0,1,193,52.93a54.87,54.87,0,0,1,5.59,12.41c6.26,19.2,1.35,41.6-16,53.19-13.31,8.88-30.23,9.93-45.68,7.71-20.7-3-40.21-13-53.76-29.09-12.39-14.67-20.83-35.74-15.74-55,3.72-14.09,15.17-24.61,28.86-29,17.33-5.61,36.41-3,52,6.11,7.81,4.56,15,10.86,18.94,19.11A28.27,28.27,0,0,1,170,50.27a24.44,24.44,0,0,1-.39,5c-.11.6-1.37,2.29-1.2.9"/></g></g></svg>

      </a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/">Home</a></li>
        <li><a href="/docs">Documentation</a></li>
        <li><a href="/boxes">Boxes</a></li>
        <li><a href="/blog">Blog</a></li>
        <li><a href="/tutorials">Tutorials</a></li>
        <li><a href="/support">Support</a></li>
        <li><a href="/community">Community</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container-fluid -->
</nav>

  <section class="MainContent">
    <div class="container-fluid">
      <div class="row">
        <div class="col-xs-12 col-md-3 SubNav">
          <form class="DocSearchForm" action='/docs/search#results' method='get'>
            <label for="search-box" class="sr-only">Search</label>

            <div class="input-group">
              <input class="form-control" type="text" id="search-box" name="query" placeholder="Search the Docs">
              <span class="input-group-btn">
                <input class="btn btn-primary btn-sm" type="submit" value="search">
              </span>
            </div>
          </form>
          
          

          <ul class="list-unstyled">
                          <h2>Getting Started</h2>
                                    <li>
              <ul class="list-unstyled">
                                  
                <li class=""><a href="/docs/getting_started/installation">Installation</a></li>
                                
                <li class=""><a href="/docs/getting_started/project">Creating a project</a></li>
                                
                <li class=""><a href="/docs/getting_started/client">Choosing an Ethereum client</a></li>
                                
                <li class=""><a href="/docs/getting_started/compile">Compiling contracts</a></li>
                                
                <li class=""><a href="/docs/getting_started/migrations">Running migrations</a></li>
                                
                <li class=""><a href="/docs/getting_started/testing">Testing your contracts</a></li>
                                
                <li class=""><a href="/docs/getting_started/javascript-tests">Writing tests in Javascript</a></li>
                                
                <li class=""><a href="/docs/getting_started/solidity-tests">Writing tests in Solidity</a></li>
                                
                <li class="active"><a href="/docs/getting_started/contracts">Interacting with your contracts</a></li>
                                
                <li class=""><a href="/docs/getting_started/packages-ethpm">Package management via EthPM</a></li>
                                
                <li class=""><a href="/docs/getting_started/packages-npm">Package management via NPM</a></li>
                                
                <li class=""><a href="/docs/getting_started/debugging">Debugging your contracts</a></li>
                                
                <li class=""><a href="/docs/getting_started/console">Using the console</a></li>
                                
                <li class=""><a href="/docs/getting_started/scripts">Writing external scripts</a></li>
                                
                <li class=""><a href="/docs/getting_started/build">Using the build pipeline</a></li>
                                
                <li class=""><a href="/docs/getting_started/contact">Contact the developers</a></li>
                            </ul>
            </li>
                        <h2>Advanced</h2>
                                    <li>
              <ul class="list-unstyled">
                                  
                <li class=""><a href="/docs/advanced/configuration">Configuration</a></li>
                                
                <li class=""><a href="/docs/advanced/networks">Networks &amp; App Deployment</a></li>
                                
                <li class=""><a href="/docs/advanced/build_processes">Build Processes</a></li>
                                
                <li class=""><a href="/docs/advanced/commands">Command Reference</a></li>
                                
                <li class=""><a href="/docs/advanced/truffle-boxes">Truffle Boxes</a></li>
                                
                <li class=""><a href="/docs/advanced/truffle-with-metamask">Truffle with MetaMask</a></li>
                            </ul>
            </li>
          
          </ul>
        </div>
        <div class="col-xs-12 col-md-9 col-md-offset-3 ContentPage">
          <h1><a name="introduction" class="anchor" href="#introduction"><span class="header-link" style="z-index: 9999999921">&nbsp;</span></a>Introduction</h1><p>If you were writing raw requests to the Ethereum network yourself in order to interact with your contracts, you&#39;d soon realize that writing these requests is clunky and cumbersome. As well, you might find that managing the state each request you&#39;ve made is <em>complicated</em>. Fortunately, Truffle takes care of this complexity for you, to make interacting with your contracts a breeze.</p>
<h1><a name="reading-amp-writing-data" class="anchor" href="#reading-amp-writing-data"><span class="header-link" style="z-index: 9999999920">&nbsp;</span></a>Reading &amp; Writing Data</h1><p>The Ethereum network makes a distinction between writing data to the network and reading data from it, and this distinction plays a significant part in how you write your application. In general, writing data is called a <strong>transaction</strong> whereas reading data is called a <strong>call</strong>. Transactions and calls are treated very differently, and have the following characteristics.</p>
<h3><a name="transactions" class="anchor" href="#transactions"><span class="header-link" style="z-index: 9999999919">&nbsp;</span></a>Transactions</h3><p>Transactions fundamentally change the state of the network. A transaction can be as simple as sending Ether to another account, or as complicated as executing a contract function or adding a new contract to the network. The defining characteristic of a transaction is that it writes (or changes) data. Transactions cost Ether to run, known as &quot;gas&quot;, and transactions take time to process. When you execute a contract&#39;s function via a transaction, you cannot receive that function&#39;s return value because the transaction isn&#39;t processed immediately. In general, functions meant to be executed via a transaction will not return a value; they will return a transaction id instead. So in summary, transactions:</p>
<ul>
<li>Cost gas (Ether)</li>
<li>Change the state of the network</li>
<li>Aren&#39;t processed immediately</li>
<li>Won&#39;t expose a return value (only a transaction id).</li>
</ul>
<h3><a name="calls" class="anchor" href="#calls"><span class="header-link" style="z-index: 9999999918">&nbsp;</span></a>Calls</h3><p>Calls, on the other hand, are very different. Calls can be used to execute code on the network, though no data will be permanently changed. Calls are free to run, and their defining characteristic is that they read data. When you execute a contract function via a call you will receive the return value immediately. In summary, calls:</p>
<ul>
<li>Are free (do not cost gas)</li>
<li>Do not change the state of the network</li>
<li>Are processed immediately</li>
<li>Will expose a return value (hooray!)</li>
</ul>
<p>Choosing between a transaction and a call is as simple as deciding whether you want to read data, or write it.</p>
<h1><a name="introducing-abstractions" class="anchor" href="#introducing-abstractions"><span class="header-link" style="z-index: 9999999917">&nbsp;</span></a>Introducing Abstractions</h1><p>Contract abstractions are the bread and butter of interacting with Ethereum contracts from Javascript. In short, contract abstractions are wrapper code that makes interaction with your contracts easy, in a way that lets you forget about the many engines and gears executing under the hood. Truffle uses its own contract abstraction via the <a href="https://github.com/trufflesuite/truffle-contract">truffle-contract</a> module, and it is this contract abstraction that&#39;s described below.</p>
<p>In order to appreciate the usefulness of a contract abstraction, however, we first need a contract to talk about. We&#39;ll use the MetaCoin contract provided for you by default via <code>truffle init</code>.</p>
<pre><code class="lang-javascript">pragma solidity ^0.4.2;

import &quot;./ConvertLib.sol&quot;;

// This is just a simple example of a coin-like contract.
// It is not standards compatible and cannot be expected to talk to other
// coin/token contracts. If you want to create a standards-compliant
// token, see: https://github.com/ConsenSys/Tokens. Cheers!

contract MetaCoin {
    mapping (address =&gt; uint) balances;

    event Transfer(address indexed _from, address indexed _to, uint256 _value);

    function MetaCoin() {
        balances[tx.origin] = 10000;
    }

    function sendCoin(address receiver, uint amount) returns(bool sufficient) {
        if (balances[msg.sender] &lt; amount) return false;
        balances[msg.sender] -= amount;
        balances[receiver] += amount;
        Transfer(msg.sender, receiver, amount);
        return true;
    }

    function getBalanceInEth(address addr) returns(uint){
        return ConvertLib.convert(getBalance(addr),2);
    }

    function getBalance(address addr) returns(uint) {
        return balances[addr];
    }
}
</code></pre>
<p>This contract has three methods aside from the constructor (<code>sendCoin</code>, <code>getBalanceInEth</code>, and <code>getBalance</code>). All three methods can be executed as either a transaction or a call.</p>
<p>Now let&#39;s look at the Javascript object called <code>MetaCoin</code> provided for us by Truffle, as made available in the <a href="/docs/getting_started/console">Truffle console</a>:</p>
<pre><code class="lang-javascript">// Print the deployed version of MetaCoin.
// Note that getting the deployed version requires a promise, hence the .then.
MetaCoin.deployed().then(function(instance) {
  console.log(instance);
});

// outputs:
//
// Contract
// - address: &quot;0xa9f441a487754e6b27ba044a5a8eb2eec77f6b92&quot;
// - allEvents: ()
// - getBalance: ()
// - getBalanceInEth: ()
// - sendCoin: ()
// ...
</code></pre>
<p>Notice that the abstraction contains the exact same functions that exist within our contract. It also contains an address which points to the deployed version of the MetaCoin contract.</p>
<h2><a name="executing-contract-functions" class="anchor" href="#executing-contract-functions"><span class="header-link" style="z-index: 9999999916">&nbsp;</span></a>Executing Contract Functions</h2><p>Using the abstraction you can easily execute contract functions on the Ethereum network.</p>
<h3><a name="making-a-transaction" class="anchor" href="#making-a-transaction"><span class="header-link" style="z-index: 9999999915">&nbsp;</span></a>Making a Transaction</h3><p>There are three functions on the MetaCoin contract that we can execute. If you analyze each of them, you&#39;ll see that <code>sendCoin</code> is the only function that aims to make changes to the network. The goal of <code>sendCoin</code> is to &quot;send&quot; some Meta coins from one account to the next, and these changes should persist.</p>
<p>When calling <code>sendCoin</code>, we&#39;ll execute it as a transaction. In the following example, we&#39;ll send 10 Meta coin from one account to another, in a way that persists changes on the network:</p>
<pre><code class="lang-javascript">var account_one = &quot;0x1234...&quot;; // an address
var account_two = &quot;0xabcd...&quot;; // another address

var meta;
MetaCoin.deployed().then(function(instance) {
  meta = instance;
  return meta.sendCoin(account_two, 10, {from: account_one});
}).then(function(result) {
  // If this callback is called, the transaction was successfully processed.
  alert(&quot;Transaction successful!&quot;)
}).catch(function(e) {
  // There was an error! Handle it.
})
</code></pre>
<p>There are a few things interesting about the above code:</p>
<ul>
<li>We called the abstraction&#39;s <code>sendCoin</code> function directly. This will result in a transaction by default (i.e, writing data) instead of call.</li>
<li>When the transaction is successful, the callback function isn&#39;t fired until the transaction is processed. This makes life easy and means you don&#39;t have to check the status of the transaction yourself.</li>
<li>We passed an object as the third parameter to <code>sendCoin</code>. Note that the <code>sendCoin</code> function in our Solidity contract doesn&#39;t have a third parameter. What you see above is a special object that can always be passed as the last parameter to a function that lets you edit specific details about the transaction. Here, we set the <code>from</code> address ensuring this transaction came from <code>account_one</code>.</li>
</ul>
<h3><a name="making-a-call" class="anchor" href="#making-a-call"><span class="header-link" style="z-index: 9999999914">&nbsp;</span></a>Making a Call</h3><p>Continuing with MetaCoin, notice the <code>getBalance</code> function is a great candidate for reading data from the network. It doesn&#39;t need to make any changes, as it just returns the MetaCoin balance of the address passed to it. Let&#39;s give it a shot:</p>
<pre><code class="lang-javascript">var account_one = &quot;0x1234...&quot;; // an address

var meta;
MetaCoin.deployed().then(function(instance) {
  meta = instance;
  return meta.getBalance.call(account_one, {from: account_one});
}).then(function(balance) {
  // If this callback is called, the call was successfully executed.
  // Note that this returns immediately without any waiting.
  // Let&#39;s print the return value.
  console.log(balance.toNumber());
}).catch(function(e) {
  // There was an error! Handle it.
})
</code></pre>
<p>What&#39;s interesting here:</p>
<ul>
<li>We had to execute the <code>.call()</code> function explicitly to let the Ethereum network know we&#39;re not intending to persist any changes.</li>
<li>We received a return value instead of a transaction id on success. Note that since the Ethereum network can handle very large numbers, we&#39;re given a <a href="https://github.com/MikeMcl/bignumber.js/">BigNumber</a> object which we then convert to a number.</li>
</ul>
<p><strong>Warning:</strong> We convert the return value to a number because in this example the numbers are small. However, if you try to convert a BigNumber that&#39;s larger than the largest integer supported by Javascript, you&#39;ll likely run into errors or unexpected behavior.</p>
<h3><a name="catching-events" class="anchor" href="#catching-events"><span class="header-link" style="z-index: 9999999913">&nbsp;</span></a>Catching Events</h3><p>Your contracts can fire events that you can catch to gain more insight into what your contracts are doing. The easiest way to handle events is by processing the result object of the transaction that triggered the event, like so:</p>
<pre><code class="lang-javascript">var account_one = &quot;0x1234...&quot;; // an address
var account_two = &quot;0xabcd...&quot;; // another address

var meta;
MetaCoin.deployed().then(function(instance) {
  meta = instance;  
  return meta.sendCoin(account_two, 10, {from: account_one});
}).then(function(result) {
  // result is an object with the following values:
  //
  // result.tx      =&gt; transaction hash, string
  // result.logs    =&gt; array of decoded events that were triggered within this transaction
  // result.receipt =&gt; transaction receipt object, which includes gas used

  // We can loop through result.logs to see if we triggered the Transfer event.
  for (var i = 0; i &lt; result.logs.length; i++) {
    var log = result.logs[i];

    if (log.event == &quot;Transfer&quot;) {
      // We found the event!
      break;
    }
  }
}).catch(function(err) {
  // There was an error! Handle it.
});
</code></pre>
<h3><a name="add-a-new-contract-to-the-network" class="anchor" href="#add-a-new-contract-to-the-network"><span class="header-link" style="z-index: 9999999912">&nbsp;</span></a>Add a new contract to the network</h3><p>In all of the above cases, we&#39;ve been using a contract abstraction that has already been deployed. We can deploy our own version to the network using the <code>.new()</code> function:</p>
<pre><code class="lang-javascript">MetaCoin.new().then(function(instance) {
  // Print the new address
  console.log(instance.address);
}).catch(function(err) {
  // There was an error! Handle it.
});
</code></pre>
<h3><a name="use-a-contract-at-a-specific-address" class="anchor" href="#use-a-contract-at-a-specific-address"><span class="header-link" style="z-index: 9999999911">&nbsp;</span></a>Use a contract at a specific address</h3><p>If you already have an address for a contract, you can create a new abstraction to represent the contract at that address.</p>
<pre><code class="lang-javascript">var instance = MetaCoin.at(&quot;0x1234...&quot;);
</code></pre>
<h3><a name="sending-ether-to-a-contract" class="anchor" href="#sending-ether-to-a-contract"><span class="header-link" style="z-index: 9999999910">&nbsp;</span></a>Sending Ether to a contract</h3><p>You may simply want to send Ether directly to a contract, or trigger a contract&#39;s <a href="http://solidity.readthedocs.io/en/develop/contracts.html#fallback-function">fallback function</a>. You can do so using one of the following two options.</p>
<p>Option 1: Send a transaction directly to a contract via <code>instance.sendTransaction()</code>. This is promisified like all available contract instance functions, and has the same API as <code>web3.eth.sendTransaction</code> but without the callback. The <code>to</code> value will be automatically filled in for you if not specified.</p>
<pre><code class="lang-javascript">instance.sendTransaction({...}).then(function(result) {
  // Same transaction result object as above.
});
</code></pre>
<p>Option 2: There&#39;s also shorthand for just sending Ether directly:</p>
<pre><code class="lang-javascript">instance.send(web3.toWei(1, &quot;ether&quot;)).then(function(result) {
  // Same result object as above.
});
</code></pre>
<h1><a name="further-reading" class="anchor" href="#further-reading"><span class="header-link" style="z-index: 9999999909">&nbsp;</span></a>Further Reading</h1><p>The contract abstractions provided by Truffle contain a wealth of utilities for making interacting with your contracts easy. Check out the <a href="https://github.com/trufflesuite/truffle-contract">truffle-contract</a> documentation for tips, tricks and insights.</p>

          <footer class="container-fluid">
            <p class="text-center">See a way to make this page better? <br class="visible-xs" /><a href="https://github.com/trufflesuite/trufflesuite.com/edit/master/public/docs/getting_started/contracts.md">Edit here &rarr;</a></p>
          </footer>
        </div>
      </div>
    </div>
  </section>
</section>

    </main>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script src="/scripts/main.js"></script>
<script src="/deps/scripts/prism.js"></script>
<script src="/deps/scripts/collapse.js"></script>
<script src="/deps/scripts/dropdown.js"></script>
<script src="/deps/scripts/lunr.js"></script>
<script src="/scripts/navbar.js"></script>


    
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-83874933-3', 'auto');
    ga('send', 'pageview');
  </script>

  </body>
</html>
